{% extends 'pyquiz/base.html' %}
{% block content %}
                            <!-- Primary box -->
                            <div class="box box-primary">
                                {% if week_id %}
                                <div title="" data-toggle="tooltip" class="box-header" data-original-title="PyQuiz Information Bulletin">
                                    <h3 class="box-title">Take Quiz</h3>
                                    
                                </div>
                                <div class="box-body">
                                    Your Weekly Quiz is ready. Please click on the link below:
                                    <p>
                                        <button onClick="ga('send', 'event', 'button', 'click', 'Take-Quiz');" type="button" class="btn btn-inverse" id="take-quiz" data-redirect-to="{% url 'quiz' week_id %}">Take the Quiz</button>
                                    </p>
                                </div><!-- /.box-body -->
                                <div class="box-footer">
                                    <p>All the best!!!</p>
                                </div><!-- /.box-footer-->
                                {% else %}
                                <div title="" data-toggle="tooltip" class="box-header" data-original-title="PyQuiz Information Bulletin">
                                    <h3 class="box-title">Congrats!!!</h3>
                                </div>
                                <div class="box-body">
                                    <p>You have completed all your quizzes till this week. Now, take a look at the below stats and carry on with your other work.</p><br/>
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="box box-solid box-warning">
                                                <div class="box-header">
                                                    <h3 class="box-title">Overall Top 3</h3>
                                                    <div class="box-tools pull-right">
                                                        <button data-widget="collapse" class="btn btn-warning btn-sm"><i class="fa fa-minus"></i></button>
                                                        <button data-widget="remove" class="btn btn-warning btn-sm"><i class="fa fa-times"></i></button>
                                                    </div>
                                                </div>
                                                <div id="overall" class="box-body">
                                                    <table class="table">
                                                        <tbody>
                                                            <tr>
                                                                <th style="width: 10px">#</th>
                                                                <th>Pythonite</th>
                                                                <th style="width: 10px">Points</th>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div><!-- /.box-body -->
                                                <div class="box-footer">
                                                    <a href="{% url 'leaderboard' '/overall' %}?limit=3" target="_blank" >More info <i class="fa fa-arrow-circle-right"></i></a>
                                                </div>
                                            </div><!-- /.box -->
                                        </div>
                                        <div class="col-md-4">
                                            <!-- Success box -->
                                            <div class="box box-solid box-success">
                                                <div class="box-header">
                                                    <h3 class="box-title">Monthly Top 3</h3>
                                                    <div class="box-tools pull-right">
                                                        <button data-widget="collapse" class="btn btn-success btn-sm"><i class="fa fa-minus"></i></button>
                                                        <button data-widget="remove" class="btn btn-success btn-sm"><i class="fa fa-times"></i></button>
                                                    </div>
                                                </div>
                                                <div id="monthly" class="box-body">
                                                    <table class="table">
                                                        <tbody>
                                                            <tr>
                                                                <th style="width: 10px">#</th>
                                                                <th>Pythonite</th>
                                                                <th style="width: 10px">Points</th>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div><!-- /.box-body -->
                                                <div class="box-footer">
                                                    <a href="{% url 'leaderboard' '/monthly' %}?limit=3" target="_blank" >More info <i class="fa fa-arrow-circle-right"></i></a>
                                                </div>
                                            </div><!-- /.box -->
                                        </div><!-- /.col -->
                                        <div class="col-md-4">
                                            <!-- Primary box -->
                                            <div class="box box-solid box-primary">
                                                <div class="box-header">
                                                    <h3 class="box-title">Weekly Top 3</h3>
                                                    <div class="box-tools pull-right">
                                                        <button data-widget="collapse" class="btn btn-primary btn-sm"><i class="fa fa-minus"></i></button>
                                                        <button data-widget="remove" class="btn btn-primary btn-sm"><i class="fa fa-times"></i></button>
                                                    </div>
                                                </div>
                                                <div id="weekly" class="box-body">
                                                    <table class="table">
                                                        <tbody>
                                                            <tr>
                                                                <th style="width: 10px">#</th>
                                                                <th>Pythonite</th>
                                                                <th style="width: 10px">Points</th>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div><!-- /.box-body -->
                                                <div class="box-footer">
                                                    <a href="{% url 'leaderboard' '/weekly/' last_week_id%}?limit=3" target="_blank" >More info <i class="fa fa-arrow-circle-right"></i></a>
                                                </div>
                                            </div><!-- /.box -->
                                        </div>
                                    </div>
                                </div><!-- /.box-body -->
                                <div class="box-footer">
                                    <p>Patience is the key...</p>
                                </div><!-- /.box-footer-->
                                {% endif %}
                            </div><!-- /.box -->
{% endblock content %}
{% block page_scripts %}
<script type='text/javascript'>
    $(document).ready(function()
    {
        function defer_load(url, target)
        {
            $.getJSON(url, function(data)
            {
                var target_html = "";
                var index = 1;
                $.each(data.leaderboard, function(key, item) {
                    target_html += "<tr><td>" + index++ + "</td><td>" + item.first_name + "</td><td>" + item.points;
                });
                target.find("table tbody").append(target_html);
            });
        }
        defer_load("{% url 'leaderboard' '/overall' %}?limit=3", $("#overall"));
        defer_load("{% url 'leaderboard' '/weekly/' last_week_id%}?limit=3", $("#weekly"));
        defer_load("{% url 'leaderboard' '/monthly' %}?limit=3", $("#monthly"));
    });
</script>
{% endblock page_scripts %}
